---
title: 关于图片内存优化
date: 2016-06-23 06:42:43
tags:
---
##### 关于图片加载时候运行内存的计算和优化问题

- 思考背景
今天做ios客户端的同学问了我一个问题,有两张图片,一张是100X100,图片大小是50k,领一张图片是50X50,图片大小是100k,在加载的时候哪张图片更加消耗内存.
我主观认定当然是占据硬盘空间比较大的更加消耗内存,答案当然是错的.并且我认为这个内存的优化的问题在web端也是必须要考虑而我是从没有考虑过,但是通过查阅资料和思考,我得出的结论是之前的主观认定和对web真正的运行机制理解太不透彻.

- 资料查阅和分析
    1. 运行内存的计算
        搜索结果显示,貌似只有客户端才会计算图片加载时候的运行内存,[参考文档1](http://blog.csdn.net/hudashi/article/details/7856519),[参考文档2](http://blog.csdn.net/mengweiqi33/article/details/51192982);
        一张按照位图(bitMap)存储的图片,占用的内存主要和几个因数有关,图片长度，图片宽度，单位像素占用的字节数.计算方法是:图片长度*图片宽度*单位像素所占用的字节数(图片长度和宽度的单位当时px).
        而客户端是根据inPreferredConfig的BitMap.Config这个类来具体计算,根据图片的4种不同格式
        
            | 水果        | 价格    |  数量  |
            | --------   | -----:   | :----: |
            | 香蕉        | $1      |   5    |
            | 苹果        | $1      |   6    |
            | 草莓        | $1      |   7    |
- 浏览器的运行机制
    
- 引申问题

- 自己的思考

- png  和  jpeg  图片格式
